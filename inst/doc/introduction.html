<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Chen Yang" />

<meta name="date" content="2026-02-07" />

<title>Introduction to mLLMCelltype</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>







<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to mLLMCelltype</h1>
<h4 class="author">Chen Yang</h4>
<h4 class="date">2026-02-07</h4>



<div id="introduction-to-mllmcelltype" class="section level1">
<h1>Introduction to mLLMCelltype</h1>
<div id="overview" class="section level2">
<h2>Overview</h2>
<p>mLLMCelltype is an iterative multi-LLM consensus framework for cell
type annotation in single-cell RNA sequencing data. By leveraging the
complementary strengths of multiple large language models, this
framework aims to improve annotation accuracy while providing
transparent uncertainty quantification.</p>
<p>The package implements a novel approach where multiple large language
models (LLMs) collaborate through structured deliberation to achieve
potentially more reliable annotations by cross-validating across
models.</p>
</div>
<div id="background" class="section level2">
<h2>Background</h2>
<p>Cell type annotation is a critical step in single-cell RNA sequencing
(scRNA-seq) analysis. Traditional methods often rely on reference
datasets or marker gene databases, which can be limited by the
availability of high-quality references and the complexity of cell types
across different tissues and conditions.</p>
<p>Large language models have shown promising results in cell type
annotation by leveraging their extensive knowledge of biological
literature and ability to reason about gene expression patterns.
However, individual LLMs can produce hallucinations or make errors due
to limitations in their training data or reasoning capabilities.</p>
<p>mLLMCelltype addresses these challenges by implementing a
consensus-based approach where multiple LLMs collaborate to provide more
reliable annotations.</p>
</div>
<div id="key-features" class="section level2">
<h2>Key Features</h2>
<div id="multi-llm-consensus-architecture" class="section level3">
<h3>Multi-LLM Consensus Architecture</h3>
<p>mLLMCelltype combines predictions from multiple LLMs to reduce
individual model biases. The package currently supports a wide range of
models:</p>
<ul>
<li>OpenAI GPT-4o/4.1</li>
<li>Anthropic Claude-3.7/3.5</li>
<li>Google Gemini-2.0/2.5 (including Gemini-2.0-Flash-Lite)</li>
<li>X.AI Grok-3</li>
<li>DeepSeek-V3</li>
<li>Alibaba Qwen2.5/Qwen3</li>
<li>Zhipu GLM-4</li>
<li>MiniMax</li>
<li>Stepfun</li>
<li>OpenRouter</li>
</ul>
<p>By integrating multiple models with different architectures and
training data, mLLMCelltype can produce annotations less sensitive to
individual model biases.</p>
</div>
<div id="structured-deliberation-process" class="section level3">
<h3>Structured Deliberation Process</h3>
<p>The package enables LLMs to share reasoning, evaluate evidence, and
refine annotations through multiple rounds of collaborative discussion.
This structured deliberation process includes:</p>
<ol style="list-style-type: decimal">
<li><strong>Initial independent annotation</strong> by each LLM</li>
<li><strong>Identification of controversial clusters</strong> where
models disagree</li>
<li><strong>Structured discussion</strong> where models share their
reasoning and evaluate othersâ€™ arguments</li>
<li><strong>Consensus formation</strong> through iterative
refinement</li>
</ol>
<p>This process mimics how a panel of human experts might collaborate to
reach a consensus on difficult cases.</p>
</div>
<div id="transparent-uncertainty-quantification" class="section level3">
<h3>Transparent Uncertainty Quantification</h3>
<p>mLLMCelltype provides quantitative metrics to identify ambiguous cell
populations that may require expert review:</p>
<ul>
<li><strong>Consensus Proportion</strong>: Measures the level of
agreement among LLMs</li>
<li><strong>Shannon Entropy</strong>: Quantifies the uncertainty in the
annotations</li>
</ul>
<p>These metrics help researchers identify which cell clusters have high
confidence annotations and which may require further investigation.</p>
</div>
<div id="other-advanced-features" class="section level3">
<h3>Other Advanced Features</h3>
<ul>
<li><strong>Hallucination Reduction</strong>: Cross-model comparison may
help identify inconsistent predictions</li>
<li><strong>Robust to Input Noise</strong>: Maintains high accuracy even
with imperfect marker gene lists</li>
<li><strong>Hierarchical Annotation Support</strong>: Optional extension
for multi-resolution analysis</li>
<li><strong>No Reference Dataset Required</strong>: Performs annotation
without pre-training or reference data</li>
<li><strong>Complete Reasoning Chains</strong>: Documents the full
deliberation process</li>
<li><strong>Integration</strong>: Works with standard Scanpy/Seurat
workflows</li>
<li><strong>Modular Design</strong>: Easily incorporate new LLMs as they
become available</li>
<li><strong>Enhanced Marker Gene Visualization</strong>:
Publication-ready bubble plots and heatmaps showing marker gene
expression patterns across annotated cell types</li>
</ul>
</div>
</div>
<div id="applicable-scenarios" class="section level2">
<h2>Applicable Scenarios</h2>
<p>mLLMCelltype is designed for a wide range of single-cell RNA
sequencing analysis scenarios:</p>
<ul>
<li><strong>Novel tissue types</strong> where reference datasets may be
limited</li>
<li><strong>Rare or poorly characterized cell populations</strong></li>
<li><strong>Complex tissues</strong> with many similar cell types</li>
<li><strong>Integrative analysis</strong> across multiple datasets</li>
<li><strong>Quality control</strong> to validate annotations from other
methods</li>
</ul>
</div>
<div id="latest-updates" class="section level2">
<h2>Latest Updates</h2>
<div id="v1.1.4-2025-04-24" class="section level3">
<h3>v1.1.4 (2025-04-24)</h3>
<div id="bug-fixes" class="section level4">
<h4>Bug Fixes</h4>
<ul>
<li>Fixed a critical issue in cluster index handling for CSV-style
inputs</li>
<li>Fixed negative index (-1) edge cases during parsing</li>
<li>Improved cluster ID validation and diagnostics</li>
</ul>
</div>
<div id="improvements" class="section level4">
<h4>Improvements</h4>
<ul>
<li>Improved input-contract consistency for cluster IDs across core
workflows</li>
<li>Hardened parser behavior for mixed model output formats</li>
<li>Updated code comments and examples for clarity</li>
</ul>
<p>For a complete list of updates, please refer to the <a href="../NEWS.md">NEWS.md</a> file.</p>
</div>
</div>
</div>
<div id="getting-started" class="section level2">
<h2>Getting Started</h2>
<p>To get started with mLLMCelltype, please refer to the <a href="https://cafferyang.com/mLLMCelltype/articles/installation.html">Installation
Guide</a> and <a href="https://cafferyang.com/mLLMCelltype/articles/getting-started.html">Quick
Start Guide</a>.</p>
</div>
<div id="citation" class="section level2">
<h2>Citation</h2>
<p>If you use mLLMCelltype in your research, please cite:</p>
<pre><code>Yang, C., Zhang, X., &amp; Chen, J. (2025). Large Language Model Consensus Substantially
Improves the Cell Type Annotation Accuracy for scRNA-seq Data. bioRxiv.
https://doi.org/10.1101/2025.04.10.647852</code></pre>
</div>
<div id="next-steps" class="section level2">
<h2>Next Steps</h2>
<ul>
<li><a href="https://cafferyang.com/mLLMCelltype/articles/installation.html">Installation
Guide</a>: Learn how to install and configure mLLMCelltype</li>
<li><a href="https://cafferyang.com/mLLMCelltype/articles/getting-started.html">Quick
Start Guide</a>: Get started with basic usage examples</li>
<li><a href="https://cafferyang.com/mLLMCelltype/articles/usage-tutorial.html">Usage
Tutorial</a>: Explore detailed usage scenarios</li>
<li><a href="https://cafferyang.com/mLLMCelltype/articles/consensus-principles.html">Consensus
Annotation Principles</a>: Understand the technical principles</li>
</ul>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
